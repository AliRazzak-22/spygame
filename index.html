<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„Ø¹Ø¨Ø© Ø§Ù„Ø¬Ø§Ø³ÙˆØ³ - Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ù…Ø·ÙˆØ±</title>
    <style>
        /* --- CSS: Ø§Ù„ØªØµÙ…ÙŠÙ… --- */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #2c3e50;
            background-image: linear-gradient(rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.8)), url('https://images.unsplash.com/photo-1550684848-fac1c5b4e853?q=80&w=2070');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            color: white;
            text-align: center;
            padding: 20px;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
        }

        .container {
            background-color: rgba(44, 62, 80, 0.9);
            backdrop-filter: blur(8px);
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.6);
            width: 95%;
            max-width: 500px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
        }

        .credits {
            font-size: 12px;
            color: #bdc3c7;
            margin-bottom: 20px;
            letter-spacing: 1px;
            background: rgba(0,0,0,0.3);
            padding: 5px 15px;
            border-radius: 20px;
            display: inline-block;
        }

        h1 { color: #f1c40f; margin: 10px 0 20px 0; text-shadow: 2px 2px 4px #000; }
        h2 { font-size: 24px; margin: 10px 0; }
        
        textarea, input {
            width: 100%;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 12px;
            border: 2px solid #34495e;
            font-size: 16px;
            box-sizing: border-box;
            background-color: #ecf0f1;
            color: #2c3e50;
            font-family: inherit;
        }

        textarea { height: 100px; resize: vertical; }

        button {
            width: 100%;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 12px;
            border: none;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            color: white;
            background-color: #e74c3c;
            box-shadow: 0 4px 0 #c0392b;
        }

        button:active { transform: translateY(4px); box-shadow: none; }
        button.secondary { background-color: #95a5a6; box-shadow: 0 4px 0 #7f8c8d; }
        button.category-btn { background-color: #3498db; box-shadow: 0 4px 0 #2980b9; }
        button.vote-btn { background-color: #8e44ad; box-shadow: 0 4px 0 #732d91; margin-bottom: 8px; font-size: 16px; }

        .hidden { display: none; }
        
        .card {
            background: #fff;
            color: #2c3e50;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            border-right: 5px solid #f1c40f;
        }

        .word-reveal {
            font-size: 32px;
            font-weight: 800;
            color: #d35400;
            display: block;
            margin: 15px 0;
        }

        .score-table {
            width: 100%;
            margin-top: 15px;
            border-collapse: collapse;
        }
        .score-table th, .score-table td {
            padding: 8px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            text-align: center;
        }
        .score-table th { color: #f1c40f; }

        .rules-box {
            background: rgba(0,0,0,0.3);
            padding: 15px;
            border-radius: 10px;
            text-align: right;
            font-size: 15px;
            line-height: 1.6;
            margin-bottom: 20px;
        }
        .rules-box ul { padding-right: 20px; margin: 0; }
    </style>
</head>
<body>

    <div class="container">
        <div id="screen-setup">
            <div class="credits">ØªÙ… Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡ ÙˆØ§Ù„ØªØ·ÙˆÙŠØ± Ø¨ÙˆØ§Ø³Ø·Ø© Ø¹Ù„ÙŠ Ø±Ø²Ø§Ù‚</div>
            <h1>ğŸ•µï¸ Ù„Ø¹Ø¨Ø© Ø§Ù„Ø¬Ø§Ø³ÙˆØ³</h1>
            <p>Ø£Ø¯Ø®Ù„ Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† (ÙƒÙ„ Ø§Ø³Ù… ÙÙŠ Ø³Ø·Ø±):</p>
            <textarea id="playerNamesInput" placeholder="Ø¹Ù„ÙŠ&#10;Ù…Ø­Ù…Ø¯&#10;Ø³Ø§Ø±Ø©&#10;Ø£Ø­Ù…Ø¯"></textarea>
            <button onclick="processNames()">Ø§Ù„ØªØ§Ù„ÙŠ</button>
        </div>

        <div id="screen-difficulty" class="hidden">
            <h1>Ø§Ø®ØªØ± Ø§Ù„Ù…Ø³ØªÙˆÙ‰</h1>
            <button class="category-btn" onclick="showRules('hard')">ğŸ”¥ Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØµØ¹Ø¨</button>
            <button class="category-btn" onclick="showRules('easy')">ğŸ˜Œ Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø³Ù‡Ù„</button>
        </div>

        <div id="screen-rules" class="hidden">
            <h1 id="rulesTitle">Ù‚ÙˆØ§Ù†ÙŠÙ† Ø§Ù„Ù„Ø¹Ø¨Ø©</h1>
            <div class="rules-box" id="rulesText">
                </div>
            <button onclick="confirmDifficulty()">Ù…ÙˆØ§ÙÙ‚ØŒ Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨</button>
            <button class="secondary" onclick="goBackToDifficulty()">Ø±Ø¬ÙˆØ¹</button>
        </div>

        <div id="screen-category" class="hidden">
            <h1>Ø§Ø®ØªØ± Ù…ÙˆØ¶ÙˆØ¹ Ø§Ù„Ø¬ÙˆÙ„Ø©</h1>
            <button class="category-btn" onclick="startGame('football')">âš½ Ø£Ø³Ø§Ø·ÙŠØ± ÙƒØ±Ø© Ø§Ù„Ù‚Ø¯Ù…</button>
            <button class="category-btn" onclick="startGame('animals')">ğŸ¦ Ø¹Ø§Ù„Ù… Ø§Ù„Ø­ÙŠÙˆØ§Ù†</button>
            <button class="category-btn" onclick="startGame('babalhara')">ğŸšª Ø¨Ø§Ø¨ Ø§Ù„Ø­Ø§Ø±Ø©</button>
            <button class="category-btn" onclick="startGame('food')">ğŸ• Ù…Ø£ÙƒÙˆÙ„Ø§Øª</button>
            <button class="category-btn" onclick="startGame('cities')">ğŸŒ Ù…Ø¯Ù† ÙˆØ¹ÙˆØ§ØµÙ…</button>
        </div>

        <div id="screen-pass" class="hidden">
            <h1>ğŸ›‘ Ù‚Ù!</h1>
            <p>Ø£Ø¹Ø·Ù Ø§Ù„Ù‡Ø§ØªÙ Ø¥Ù„Ù‰:</p>
            <h2 id="currentPlayerName" style="color: #f1c40f; font-size: 35px;">...</h2>
            <button onclick="showRole()">Ø§Ø¶ØºØ· Ù„ÙƒØ´Ù Ø¯ÙˆØ±Ùƒ</button>
        </div>

        <div id="screen-reveal" class="hidden">
            <p>Ù…Ø±Ø­Ø¨Ø§Ù‹ <span id="revealName" style="color: #3498db; font-weight: bold;"></span></p>
            <div class="card">
                ÙƒÙ„Ù…ØªÙƒ Ø§Ù„Ø³Ø±ÙŠØ© Ù‡ÙŠ:
                <span id="theWord" class="word-reveal">...</span>
            </div>
            <p id="spyHint" style="font-size: 13px; color: #bdc3c7;">ØªØ°ÙƒØ± Ù‡Ø°Ù‡ Ø§Ù„ÙƒÙ„Ù…Ø© Ø¬ÙŠØ¯Ø§Ù‹!</p>
            <button onclick="nextPlayer()">ÙÙ‡Ù…ØªØŒ Ø§Ù„ØªØ§Ù„ÙŠ</button>
        </div>

        <div id="screen-discussion" class="hidden">
            <span style="font-size: 60px;">ğŸ—£ï¸</span>
            <h1>ÙˆÙ‚Øª Ø§Ù„Ù†Ù‚Ø§Ø´!</h1>
            <div class="card" style="padding: 15px;">
                <p>ÙƒÙ„ Ù„Ø§Ø¹Ø¨ ÙŠÙ‚ÙˆÙ„ Ø¬Ù…Ù„Ø© ÙˆØ§Ø­Ø¯Ø© Ø¹Ù† ÙƒÙ„Ù…ØªÙ‡.</p>
                <p>Ø­Ø§ÙˆÙ„ÙˆØ§ ÙƒØ´Ù Ø§Ù„Ø¬Ø§Ø³ÙˆØ³ØŒ ÙˆØ­Ø§ÙˆÙ„ ÙŠØ§ Ø¬Ø§Ø³ÙˆØ³ Ø§Ù„Ø§Ù†Ø¯Ù…Ø§Ø¬!</p>
            </div>
            <button onclick="startVotingSetup()">Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„Ù†Ù‚Ø§Ø´ØŒ Ø¨Ø¯Ø¡ Ø§Ù„ØªØµÙˆÙŠØª</button>
        </div>

        <div id="screen-vote-pass" class="hidden">
            <h1>ğŸ—³ï¸ ÙˆÙ‚Øª Ø§Ù„ØªØµÙˆÙŠØª</h1>
            <p>Ø£Ø¹Ø·Ù Ø§Ù„Ù‡Ø§ØªÙ Ø¥Ù„Ù‰:</p>
            <h2 id="currentVoterName" style="color: #e74c3c; font-size: 35px;">...</h2>
            <p style="font-size: 12px;">(Ø§Ù„ØªØµÙˆÙŠØª Ø³Ø±ÙŠ Ù„Ù„ØºØ§ÙŠØ©!)</p>
            <button onclick="showVotingScreen()">Ø¬Ø§Ù‡Ø² Ù„Ù„ØªØµÙˆÙŠØª</button>
        </div>

        <div id="screen-vote-action" class="hidden">
            <h3>ÙŠØ§ <span id="voterNameAction"></span>ØŒ Ù…Ù† Ù‡Ùˆ Ø§Ù„Ø¬Ø§Ø³ÙˆØ³ØŸ</h3>
            <div id="votingButtonsContainer"></div>
        </div>

        <div id="screen-results" class="hidden">
            <h1>ğŸ Ø§Ù„Ù†ØªØ§Ø¦Ø¬</h1>
            
            <div class="card" style="border-right-color: #e74c3c;">
                <p>Ø§Ù„Ø¬Ø§Ø³ÙˆØ³ ÙƒØ§Ù†: <b id="realSpyName" style="font-size: 20px; color: #c0392b;"></b></p>
                <p>ÙƒÙ„Ù…Ø© Ø§Ù„Ù…ÙˆØ§Ø·Ù†ÙŠÙ†: <b id="citizenWordDisplay" style="color: #27ae60;"></b></p>
                <p>ÙƒÙ„Ù…Ø© Ø§Ù„Ø¬Ø§Ø³ÙˆØ³: <b id="spyWordResultDisplay" style="color: #d35400;"></b></p>
            </div>

            <h3>ğŸ“Š Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù†Ù‚Ø§Ø·</h3>
            <table class="score-table">
                <thead>
                    <tr>
                        <th>Ø§Ù„Ù„Ø§Ø¹Ø¨</th>
                        <th>Ø§Ù„Ù†Ù‚Ø§Ø·</th>
                    </tr>
                </thead>
                <tbody id="scoreTableBody">
                    </tbody>
            </table>
            <br>
            <button onclick="playAgain()">Ø¬ÙˆÙ„Ø© Ø£Ø®Ø±Ù‰ (Ù†ÙØ³ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†)</button>
            <button class="secondary" onclick="location.reload()">Ù„Ø¹Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø© ÙƒÙ„ÙŠØ§Ù‹</button>
        </div>
    </div>

    <script>
        // --- Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ---
        const bgImages = {
            default: "https://images.unsplash.com/photo-1550684848-fac1c5b4e853?q=80&w=2070",
            football: "football.jpg",
            animals: "animal.jpg",
            babalhara: "babalhara.jpg",
            food: "food.jpg",
            cities: "116.jpg"
        };

        const data = {
            football: [
                // Ø£Ø³Ø§Ø·ÙŠØ± Ø§Ù„ÙƒÙ„Ø§Ø³ÙŠÙƒÙˆ (Ø±ÙŠØ§Ù„ Ù…Ø¯Ø±ÙŠØ¯ ÙˆØ¨Ø±Ø´Ù„ÙˆÙ†Ø© 1999-Ø§Ù„Ø¢Ù†)
                { common: "Ù„ÙŠÙˆÙ†ÙŠÙ„ Ù…ÙŠØ³ÙŠ", spy: "ÙƒØ±ÙŠØ³ØªÙŠØ§Ù†Ùˆ Ø±ÙˆÙ†Ø§Ù„Ø¯Ùˆ" },
                { common: "Ø²ÙŠÙ† Ø§Ù„Ø¯ÙŠÙ† Ø²ÙŠØ¯Ø§Ù†", spy: "Ù„ÙˆÙŠØ³ ÙÙŠØºÙˆ" },
                { common: "Ø³ÙŠØ±Ø¬ÙŠÙˆ Ø±Ø§Ù…ÙˆØ³", spy: "Ø¬ÙŠØ±Ø§Ø±Ø¯ Ø¨ÙŠÙƒÙŠÙ‡" },
                { common: "Ø£Ù†Ø¯Ø±ÙŠØ³ Ø¥Ù†ÙŠÙŠØ³ØªØ§", spy: "Ù„ÙˆÙƒØ§ Ù…ÙˆØ¯Ø±ÙŠØªØ´" },
                { common: "ØªØ´Ø§ÙÙŠ Ù‡ÙŠØ±Ù†Ø§Ù†Ø¯ÙŠØ²", spy: "ØªÙˆÙ†ÙŠ ÙƒØ±ÙˆØ³" },
                { common: "ÙƒØ±ÙŠÙ… Ø¨Ù†Ø²ÙŠÙ…Ø§", spy: "Ù„ÙˆÙŠØ³ Ø³ÙˆØ§Ø±ÙŠØ²" },
                { common: "Ø¥ÙŠÙƒØ± ÙƒØ§Ø³ÙŠØ§Ø³", spy: "ÙÙŠÙƒØªÙˆØ± ÙØ§Ù„Ø¯ÙŠØ²" },
                { common: "Ø±ÙˆÙ†Ø§Ù„Ø¯ÙŠÙ†ÙŠÙˆ", spy: "Ø±ÙˆÙ†Ø§Ù„Ø¯Ùˆ Ø§Ù„Ø¸Ø§Ù‡Ø±Ø©" },
                { common: "Ø±ÙˆØ¨Ø±ØªÙˆ ÙƒØ§Ø±Ù„ÙˆØ³", spy: "Ø¯Ø§Ù†ÙŠ Ø£Ù„ÙÙŠØ³" },
                { common: "Ù†ÙŠÙ…Ø§Ø±", spy: "ÙÙŠÙ†ÙŠØ³ÙŠÙˆØ³ Ø¬ÙˆÙ†ÙŠÙˆØ±" },
                { common: "Ø±Ø§Ø¤ÙˆÙ„ ØºÙˆÙ†Ø²Ø§Ù„ÙŠØ³", spy: "ØµØ§Ù…ÙˆÙŠÙ„ Ø¥ÙŠØªÙˆ" },
                { common: "ØºØ§Ø±ÙŠØª Ø¨ÙŠÙ„", spy: "Ø¹Ø«Ù…Ø§Ù† Ø¯ÙŠÙ…Ø¨ÙŠÙ„ÙŠ" },
                { common: "ÙƒØ§Ø±Ù„ÙŠØ³ Ø¨ÙˆÙŠÙˆÙ„", spy: "Ø¨ÙŠØ¨ÙŠ" },
                // Ø£Ø³Ø§Ø·ÙŠØ± Ø¹Ø§Ù„Ù…ÙŠØ© Ø£Ø®Ø±Ù‰ Ù„Ù„Ù…ÙˆØ§Ø²Ù†Ø©
                { common: "Ø¯ÙŠÙŠØºÙˆ Ù…Ø§Ø±Ø§Ø¯ÙˆÙ†Ø§", spy: "Ø¨ÙŠÙ„ÙŠÙ‡" },
                { common: "ÙƒÙŠÙ„ÙŠØ§Ù† Ù…Ø¨Ø§Ø¨ÙŠ", spy: "Ø¥ÙŠØ±Ù„ÙŠÙ†Øº Ù‡Ø§Ù„Ø§Ù†Ø¯" },
                { common: "Ù…Ø­Ù…Ø¯ ØµÙ„Ø§Ø­", spy: "Ø±ÙŠØ§Ø¶ Ù…Ø­Ø±Ø²" },
                { common: "Ø¨ÙˆÙÙˆÙ†", spy: "Ù†ÙˆÙŠØ±" }
            ],
            animals: [
        // Ø­ÙŠÙˆØ§Ù†Ø§Øª Ù…ÙØªØ±Ø³Ø©
        { common: "Ø£Ø³Ø¯", spy: "Ù†Ù…Ø±" },
        { common: "ÙÙ‡Ø¯", spy: "Ù†Ù…Ø±" },
        { common: "Ø°Ø¦Ø¨", spy: "Ø«Ø¹Ù„Ø¨" },
        { common: "Ø¯Ø¨", spy: "Ø¨Ø§Ù†Ø¯Ø§" },
        { common: "Ø¶Ø¨Ø¹", spy: "ÙƒÙ„Ø¨ Ø¨Ø±ÙŠ" },
        
        // Ø­ÙŠÙˆØ§Ù†Ø§Øª Ø£Ù„ÙŠÙØ© ÙˆÙ…Ø²Ø±Ø¹Ø©
        { common: "Ù‚Ø·Ø©", spy: "Ø£Ø±Ù†Ø¨" }, // ÙƒÙ„Ø§Ù‡Ù…Ø§ Ù„Ø·ÙŠÙ ÙˆØµØºÙŠØ±
        { common: "ÙƒÙ„Ø¨", spy: "Ø°Ø¦Ø¨" },
        { common: "Ø­ØµØ§Ù†", spy: "Ø­Ù…Ø§Ø±" },
        { common: "Ø¨Ù‚Ø±Ø©", spy: "Ø¬Ø§Ù…ÙˆØ³" },
        { common: "Ø®Ø±ÙˆÙ", spy: "Ù…Ø§Ø¹Ø²" },
        { common: "Ø¬Ù…Ù„", spy: "Ù„Ø§Ù…Ø§" },

        // Ø·ÙŠÙˆØ±
        { common: "ØµÙ‚Ø±", spy: "Ù†Ø³Ø±" },
        { common: "Ø­Ù…Ø§Ù…Ø©", spy: "Ø¹ØµÙÙˆØ±" },
        { common: "Ø¨Ø¨ØºØ§Ø¡", spy: "ÙƒÙ†Ø§Ø±ÙŠ" },
        { common: "Ø¨Ø·Ø©", spy: "ÙˆØ²Ø©" },
        { common: "Ø¯Ø¬Ø§Ø¬Ø©", spy: "Ø¯ÙŠÙƒ Ø±ÙˆÙ…ÙŠ" },
        { common: "Ø·Ø§ÙˆÙˆØ³", spy: "Ù†Ø¹Ø§Ù…Ø©" },
        { common: "ØºØ±Ø§Ø¨", spy: "Ø¨ÙˆÙ…Ø©" },

        // Ø¨Ø­Ø±ÙŠØ© ÙˆØ¨Ø±Ù…Ø§Ø¦ÙŠØ©
        { common: "Ù‚Ø±Ø´", spy: "Ø­ÙˆØª" },
        { common: "Ø¯ÙˆÙ„ÙÙŠÙ†", spy: "ÙÙ‚Ù…Ø©" },
        { common: "ØªÙ…Ø³Ø§Ø­", spy: "Ø³Ø­Ù„ÙŠØ©" },
        { common: "Ø³Ù„Ø­ÙØ§Ø©", spy: "Ø¶ÙØ¯Ø¹" },
        { common: "Ø£Ø®Ø·Ø¨ÙˆØ·", spy: "Ø­Ø¨Ø§Ø±" },

        // Ø­Ø´Ø±Ø§Øª ÙˆØ²ÙˆØ§Ø­Ù
        { common: "Ù†Ù…Ù„Ø©", spy: "Ù†Ø­Ù„Ø©" },
        { common: "Ø¹Ù†ÙƒØ¨ÙˆØª", spy: "Ø¹Ù‚Ø±Ø¨" },
        { common: "Ø°Ø¨Ø§Ø¨Ø©", spy: "Ø¨Ø¹ÙˆØ¶Ø©" },
        { common: "Ø«Ø¹Ø¨Ø§Ù†", spy: "Ø¯ÙŠØ¯Ø§Ù†" }
    ],
            babalhara: [
        // --- Ø§Ù„Ø²Ø¹Ø§Ù…Ø§Øª ÙˆÙƒØ¨Ø§Ø±ÙŠØ© Ø§Ù„Ø­Ø§Ø±Ø© ---
        { common: "Ø§Ù„Ø²Ø¹ÙŠÙ… Ø£Ø¨Ùˆ ØµØ§Ù„Ø­", spy: "Ø§Ù„Ø¹Ù‚ÙŠØ¯ Ø£Ø¨Ùˆ Ø´Ù‡Ø§Ø¨" },
        { common: "Ø£Ø¨Ùˆ Ø¹ØµØ§Ù…", spy: "Ø£Ø¨Ùˆ Ø­Ø§ØªÙ…" },
        { common: "Ø£Ø¨Ùˆ Ø¨Ø´ÙŠØ± (Ø§Ù„ÙØ±Ø§Ù†)", spy: "Ø£Ø¨Ùˆ Ø®Ø§Ø·Ø±" },
        { common: "Ø£Ø¨Ùˆ Ù‚Ø§Ø³Ù…", spy: "Ø£Ø¨Ùˆ Ù…Ø±Ø²ÙˆÙ‚" },
        { common: "Ø§Ù„Ø´ÙŠØ® Ø¹Ø¨Ø¯ Ø§Ù„Ø¹Ù„ÙŠÙ…", spy: "Ø£Ø¨Ùˆ Ù…Ø­Ù…ÙˆØ¯" },
        { common: "Ø£Ø¨Ùˆ Ø¸Ø§ÙØ±", spy: "Ø§Ù„Ù…Ø®ØªØ§Ø± Ø£Ø¨Ùˆ ØµÙŠØ§Ø­" },

        // --- Ø´Ø¨Ø§Ø¨ Ø§Ù„Ø­Ø§Ø±Ø© (Ø§Ù„Ù‚Ø¨Ø¶Ø§ÙŠØ§Øª) ---
        { common: "Ù…Ø¹ØªØ²", spy: "Ø®Ø§Ø·Ø±" },
        { common: "Ø¹ØµØ§Ù…", spy: "Ø¨Ø´ÙŠØ±" },
        { common: "Ø¹Ø¨Ø¯Ùˆ", spy: "Ø³Ù…Ø¹Ùˆ" },
        { common: "Ø£Ø¨Ùˆ Ø¹Ù†Ø§Ø¯ (ØµØ¨Ø­ÙŠ)", spy: "Ù…Ø³Ù„Ù…" },
        
        // --- Ø§Ù„Ø£Ø´Ø±Ø§Ø± ÙˆØ§Ù„Ù…Ø´Ø§ÙƒÙ„ (Ø£ØµØ¹Ø¨ ÙØ¦Ø©) ---
        { common: "Ø§Ù„Ø¥Ø¯Ø¹Ø´Ø±ÙŠ", spy: "Ø£Ø¨Ùˆ Ù†Ø§Ø±" },
        { common: "Ø§Ù„Ù†Ù…Ø³", spy: "Ø£Ø¨Ùˆ ØºØ§Ù„Ø¨" },
        { common: "Ø£Ø¨Ùˆ Ø³Ø§Ø·ÙˆØ±", spy: "Ø£Ø¨Ùˆ Ø¯Ø±Ø§Ø¹" },
        { common: "ØµØ·ÙŠÙ Ø§Ù„Ø£Ø¹Ù…Ù‰", spy: "Ù…Ø£Ù…ÙˆÙ† Ø¨ÙŠÙƒ" },
        
        // --- Ø§Ù„Ø­ÙƒÙˆÙ…Ø© ÙˆØ§Ù„Ù…Ø®ÙØ± ---
        { common: "Ø£Ø¨Ùˆ Ø¬ÙˆØ¯Øª", spy: "Ù†ÙˆØ±ÙŠ" },
        { common: "Ù†ÙˆØ±ÙŠ", spy: "Ø³Ù…Ø¹Ùˆ Ø§Ø¨Ù† Ø§Ù„Ø­Ø§Ø±Ø³" },

        // --- Ù†Ø³ÙˆØ§Ù† Ø§Ù„Ø­Ø§Ø±Ø© (ÙƒÙŠØ¯ Ø§Ù„Ù†Ø³Ø§) ---
        { common: "Ø³Ø¹Ø§Ø¯ (Ø£Ù… Ø¹ØµØ§Ù…)", spy: "ÙØ±ÙŠØ§Ù„" },
        { common: "Ù„Ø·ÙÙŠØ©", spy: "Ù‡Ø¯Ù‰" },
        { common: "Ø£Ù… Ø²ÙƒÙŠ", spy: "Ø£Ù… Ø¨Ø´ÙŠØ±" },
        { common: "Ø¨ÙˆØ±Ø§Ù†", spy: "Ø¯Ù„Ø§Ù„" },
        { common: "Ø¬Ù…ÙŠÙ„Ø©", spy: "Ø²Ù‡Ø±Ø©" },
        { common: "ÙÙˆØ²ÙŠØ©", spy: "Ø£Ù… Ø®Ø§Ø·Ø±" }, // ÙÙˆØ²ÙŠØ© Ø´Ø®ØµÙŠØ© Ù…Ù…ÙŠØ²Ø© Ø¬Ø¯Ø§Ù‹

        // --- Ø´Ø®ØµÙŠØ§Øª Ø·Ø±ÙŠÙØ© ÙˆÙ…Ù…ÙŠØ²Ø© ---
        { common: "Ø£Ø¨Ùˆ Ø¨Ø¯Ø±", spy: "Ø£Ø¨Ùˆ Ø§Ù„Ø­ÙƒÙ…" }, // Ø§Ù„Ù…Ù‚Ø§Ø±Ù†Ø© Ù‡Ù†Ø§ Ù…Ø¶Ø­ÙƒØ© (Ø§Ù„Ø£Ø¶Ø¹Ù Ø¶Ø¯ Ø§Ù„Ø£Ù‚ÙˆÙ‰)
        { common: "Ø£Ù… Ø¬ÙˆØ²ÙŠÙ", spy: "Ø£Ù… Ø²ÙƒÙŠ" }
    ],
            food: [
        // --- Ø§Ù„Ù…Ø·Ø¨Ø® Ø§Ù„Ø¹Ø±Ø§Ù‚ÙŠ Ø§Ù„Ø£ØµÙŠÙ„ ---
        { common: "Ø¯ÙˆÙ„Ù…Ø©", spy: "ÙŠØ§Ø¨Ø±Ø§Ø®" }, // Ù…Ù‚Ø§Ø±Ù†Ø© ØµØ¹Ø¨Ø© Ø¬Ø¯Ø§Ù‹
        { common: "Ø³Ù…Ùƒ Ù…Ø³ÙƒÙˆÙ", spy: "Ø³Ù…Ùƒ Ù…Ù‚Ù„ÙŠ" },
        { common: "Ø¨Ø§Ø¬Ø©", spy: "ØªØ´Ø±ÙŠØ¨ Ù„Ø­Ù…" },
        { common: "Ù‚ÙŠÙ…Ø© Ù†Ø¬ÙÙŠØ©", spy: "ÙŠØ®Ù†ÙŠ (Ù…Ø±Ù‚)" },
        { common: "ÙƒØ¨Ø§Ø¨ Ø¹Ø±Ø§Ù‚ÙŠ", spy: "ØªÙƒØ©" },
        { common: "ÙƒÙ„ÙŠØ¬Ø©", spy: "Ø¨Ù‚Ù„Ø§ÙˆØ©" },
        { common: "Ù‚ÙŠÙ…Ø± Ø¹Ø±Ø¨", spy: "Ø¬Ø¨Ù† Ø¹Ø±Ø¨" },
        { common: "ÙƒØ§Ù‡ÙŠ", spy: "ÙƒÙŠÙ…Ø±" },
        { common: "Ø¯Ù‡ÙŠÙ†", spy: "Ø²Ù„Ø§Ø¨ÙŠØ©" },
        { common: "Ù„Ø¨Ù„Ø¨ÙŠ", spy: "Ø¨Ø§Ù‚Ù„Ø§Ø¡" },

        // --- Ø£ÙƒÙ„Ø§Øª Ø¹Ø±Ø¨ÙŠØ© ÙˆØ´Ø±Ù‚ÙŠØ© ---
        { common: "Ù…Ù†Ø³Ù", spy: "ÙƒØ¨Ø³Ø©" },
        { common: "Ø¨Ø±ÙŠØ§Ù†ÙŠ", spy: "Ù…Ù‚Ù„ÙˆØ¨Ø©" },
        { common: "Ø¨ÙŠØ°Ù†Ø¬Ø§Ù†ÙŠØ©", spy: "Ø­Ù…Øµ Ø¨Ø·Ø­ÙŠÙ†Ø©" },
        { common: "Ø´Ø§ÙˆØ±Ù…Ø§", spy: "ÙÙ„Ø§ÙÙ„" },
        { common: "ØªØ¨ÙˆÙ„Ø©", spy: "ÙØªÙˆØ´" },
        { common: "ÙƒØ´Ø±ÙŠ", spy: "Ù…Ø¹ÙƒØ±ÙˆÙ†Ø©" },
        { common: "Ù…Ø­Ø§Ø´ÙŠ", spy: "ÙˆØ±Ù‚ Ø¹Ù†Ø¨" },

        // --- Ø£ÙƒÙ„ Ø¹Ø§Ù„Ù…ÙŠ ÙˆØ³Ø±ÙŠØ¹ ---
        { common: "Ø¨ÙŠØªØ²Ø§", spy: "ÙØ·Ø§Ø¦Ø±" },
        { common: "Ù‡Ù…Ø¨Ø±ÙƒØ±", spy: "Ø³ØªÙŠÙƒ Ù„Ø­Ù…" },
        { common: "ÙƒÙ†ØªØ§ÙƒÙŠ (Ø¯Ø¬Ø§Ø¬ Ù…Ù‚Ù„ÙŠ)", spy: "Ø±ÙŠØ²Ùˆ" },
        { common: "Ø³ÙˆØ´ÙŠ", spy: "Ø§Ù†Ø¯ÙˆÙ…ÙŠ" }, // Ø£ÙƒÙ„ Ø¢Ø³ÙŠÙˆÙŠ
        { common: "Ø³Ø¨Ø§ØºÙŠØªÙŠ", spy: "Ù„Ø§Ø²Ø§Ù†ÙŠØ§" },
        { common: "Ø¨Ø·Ø§Ø·Ø§ Ù…Ù‚Ù„ÙŠØ©", spy: "Ø´ÙŠØ¨Ø³" },
        { common: "Ø¢ÙŠØ³ ÙƒØ±ÙŠÙ…", spy: "ÙƒØ§Ø³ØªØ±" }
    ],
            cities: [
        // --- Ù…Ø¯Ù† Ø¹Ø±Ø§Ù‚ÙŠØ© ---
        { common: "Ø¨ØºØ¯Ø§Ø¯", spy: "Ø§Ù„Ø¨ØµØ±Ø©" },
        { common: "Ø§Ù„Ù†Ø¬Ù", spy: "ÙƒØ±Ø¨Ù„Ø§Ø¡" }, // Ø£ØµØ¹Ø¨ Ù…Ù‚Ø§Ø±Ù†Ø© Ù„Ù„Ù…Ù‚Ø¯Ø³Ø§Øª
        { common: "Ø§Ù„Ù…ÙˆØµÙ„", spy: "Ø£Ø±Ø¨ÙŠÙ„" },
        { common: "Ø§Ù„Ø³Ù„ÙŠÙ…Ø§Ù†ÙŠØ©", spy: "Ø¯Ù‡ÙˆÙƒ" },
        { common: "Ø§Ù„Ø­Ù„Ø© (Ø¨Ø§Ø¨Ù„)", spy: "Ø§Ù„ÙƒÙˆØª" },
        { common: "Ø§Ù„Ù†Ø§ØµØ±ÙŠØ©", spy: "Ø§Ù„Ø¹Ù…Ø§Ø±Ø©" },
        { common: "Ø§Ù„Ø£Ù†Ø¨Ø§Ø±", spy: "ØµÙ„Ø§Ø­ Ø§Ù„Ø¯ÙŠÙ†" },

        // --- Ø¹ÙˆØ§ØµÙ… ÙˆÙ…Ø¯Ù† Ø¹Ø±Ø¨ÙŠØ© ---
        { common: "Ø¯Ø¨ÙŠ", spy: "Ø§Ù„Ø¯ÙˆØ­Ø©" }, // Ù…Ø¯Ù† Ø®Ù„ÙŠØ¬ÙŠØ© Ø­Ø¯ÙŠØ«Ø©
        { common: "Ø§Ù„Ø±ÙŠØ§Ø¶", spy: "Ø¬Ø¯Ø©" },
        { common: "Ù…ÙƒØ© Ø§Ù„Ù…ÙƒØ±Ù…Ø©", spy: "Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ù…Ù†ÙˆØ±Ø©" },
        { common: "Ø¨ÙŠØ±ÙˆØª", spy: "Ø¯Ù…Ø´Ù‚" },
        { common: "Ø¹Ù…Ø§Ù†", spy: "Ø§Ù„Ù‚Ø¯Ø³" },
        { common: "Ø§Ù„ÙƒÙˆÙŠØª", spy: "Ø§Ù„Ù…Ù†Ø§Ù…Ø©" },
        { common: "ØªÙˆÙ†Ø³", spy: "Ø§Ù„Ø¯Ø§Ø± Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡" },

        // --- Ù…Ø¯Ù† Ø¹Ø§Ù„Ù…ÙŠØ© ---
        { common: "Ù„Ù†Ø¯Ù†", spy: "Ø¨Ø§Ø±ÙŠØ³" }, // Ø£ÙˆØ±ÙˆØ¨Ø§
        { common: "Ù…Ø¯Ø±ÙŠØ¯", spy: "Ø¨Ø±Ø´Ù„ÙˆÙ†Ø©" }, // Ø¥Ø³Ø¨Ø§Ù†ÙŠØ§
        { common: "Ø±ÙˆÙ…Ø§", spy: "Ù…ÙŠÙ„Ø§Ù†Ùˆ" }, // Ø¥ÙŠØ·Ø§Ù„ÙŠØ§
        { common: "Ù†ÙŠÙˆÙŠÙˆØ±Ùƒ", spy: "Ù„ÙˆØ³ Ø£Ù†Ø¬Ù„ÙˆØ³" }, // Ø£Ù…Ø±ÙŠÙƒØ§
        { common: "Ø·ÙˆÙƒÙŠÙˆ", spy: "Ø³ÙŠÙˆÙ„" }, // Ø¢Ø³ÙŠØ§
        { common: "Ø¥Ø³Ø·Ù†Ø¨ÙˆÙ„", spy: "Ø£Ù†Ù‚Ø±Ø©" },
        { common: "Ù…ÙˆØ³ÙƒÙˆ", spy: "Ø¨Ø±Ù„ÙŠÙ†" },
        { common: "Ø·Ù‡Ø±Ø§Ù†", spy: "Ø£ØµÙÙ‡Ø§Ù†" }
    ]
        };

        // --- Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø© ---
        let players = []; // Array of objects: { name: "Ali", score: 0 }
        let selectedDifficulty = ""; // "easy" or "hard"
        let currentSpyIndex = -1;
        let currentWordObj = {};
        let currentPlayerIndex = 0;
        
        // Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„ØªØµÙˆÙŠØª
        let votes = []; // Array to store votes: [targetIndex, targetIndex, ...] (matches players index)
        let currentVoterIndex = 0;

        // --- Ø§Ù„Ø¯ÙˆØ§Ù„ ---

        function processNames() {
            const input = document.getElementById('playerNamesInput').value;
            const namesList = input.split('\n').filter(n => n.trim() !== "");
            
            if (namesList.length < 3) {
                alert("âš ï¸ Ø§Ù„Ø¹Ø¯Ø¯ Ù‚Ù„ÙŠÙ„! Ù†Ø­ØªØ§Ø¬ 3 Ù„Ø§Ø¹Ø¨ÙŠÙ† Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„.");
                return;
            }

            // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† Ù…Ø¹ ØªØµÙÙŠØ± Ø§Ù„Ù†Ù‚Ø§Ø·
            players = namesList.map(name => ({ name: name.trim(), score: 0 }));

            document.getElementById('screen-setup').classList.add('hidden');
            document.getElementById('screen-difficulty').classList.remove('hidden');
        }

        function showRules(level) {
            selectedDifficulty = level;
            const title = document.getElementById('rulesTitle');
            const text = document.getElementById('rulesText');

            document.getElementById('screen-difficulty').classList.add('hidden');
            document.getElementById('screen-rules').classList.remove('hidden');

            if (level === 'hard') {
                title.innerText = "ğŸ”¥ Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØµØ¹Ø¨ (Ø§Ù„ÙƒÙ„Ø§Ø³ÙŠÙƒÙŠ)";
                text.innerHTML = `
                    <ul>
                        <li>ÙŠØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø¬Ø§Ø³ÙˆØ³ ÙˆØ§Ø­Ø¯ Ø¹Ø´ÙˆØ§Ø¦ÙŠØ§Ù‹.</li>
                        <li>Ø§Ù„Ù…ÙˆØ§Ø·Ù†ÙˆÙ† ÙŠØ­ØµÙ„ÙˆÙ† Ø¹Ù„Ù‰ ÙƒÙ„Ù…Ø© Ù…ÙˆØ­Ø¯Ø© (Ù…Ø«Ù„Ø§Ù‹: Ø£Ø³Ø¯).</li>
                        <li><b>Ø§Ù„Ø¬Ø§Ø³ÙˆØ³ ÙŠØ­ØµÙ„ Ø¹Ù„Ù‰ ÙƒÙ„Ù…Ø© Ù…Ø®ØªÙ„ÙØ© Ù„ÙƒÙ† Ù…Ø´Ø§Ø¨Ù‡Ø©</b> (Ù…Ø«Ù„Ø§Ù‹: Ù†Ù…Ø±).</li>
                        <li>Ø§Ù„Ø¬Ø§Ø³ÙˆØ³ Ù„Ø§ ÙŠØ¹Ù„Ù… Ø£Ù†Ù‡ Ø§Ù„Ø¬Ø§Ø³ÙˆØ³ ÙÙŠ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©! Ø¹Ù„ÙŠÙ‡ Ø£Ù† ÙŠÙƒØªØ´Ù Ø°Ù„Ùƒ Ù…Ù† Ø³ÙŠØ§Ù‚ Ø§Ù„ÙƒÙ„Ø§Ù….</li>
                        <li>Ø§Ù„ÙØ§Ø¦Ø² Ù‡Ùˆ Ù…Ù† ÙŠØ¬Ù…Ø¹ Ø£ÙƒØ¨Ø± Ø¹Ø¯Ø¯ Ù†Ù‚Ø§Ø·.</li>
                    </ul>
                `;
            } else {
                title.innerText = "ğŸ˜Œ Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø³Ù‡Ù„";
                text.innerHTML = `
                    <ul>
                        <li>ÙŠØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø¬Ø§Ø³ÙˆØ³ ÙˆØ§Ø­Ø¯ Ø¹Ø´ÙˆØ§Ø¦ÙŠØ§Ù‹.</li>
                        <li>Ø§Ù„Ù…ÙˆØ§Ø·Ù†ÙˆÙ† ÙŠØ­ØµÙ„ÙˆÙ† Ø¹Ù„Ù‰ ÙƒÙ„Ù…Ø© Ù…ÙˆØ­Ø¯Ø© (Ù…Ø«Ù„Ø§Ù‹: Ø£Ø³Ø¯).</li>
                        <li><b>Ø§Ù„Ø¬Ø§Ø³ÙˆØ³ ØªØ¸Ù‡Ø± Ù„Ù‡ Ø±Ø³Ø§Ù„Ø©: "Ø£Ù†Øª Ø§Ù„Ø¬Ø§Ø³ÙˆØ³!"</b> ÙˆÙ„Ø§ ÙŠØ¹Ø±Ù ÙƒÙ„Ù…Ø© Ø§Ù„Ù…ÙˆØ§Ø·Ù†ÙŠÙ†.</li>
                        <li>Ù…Ù‡Ù…Ø© Ø§Ù„Ø¬Ø§Ø³ÙˆØ³ Ø£ØµØ¹Ø¨ ÙÙŠ Ù…Ø¹Ø±ÙØ© Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹ØŒ Ù„ÙƒÙ†Ù‡ ÙŠØ¹Ù„Ù… Ø£Ù†Ù‡ ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒØ°Ø¨.</li>
                        <li>Ø§Ù„ÙØ§Ø¦Ø² Ù‡Ùˆ Ù…Ù† ÙŠØ¬Ù…Ø¹ Ø£ÙƒØ¨Ø± Ø¹Ø¯Ø¯ Ù†Ù‚Ø§Ø·.</li>
                    </ul>
                `;
            }
        }

        function goBackToDifficulty() {
            document.getElementById('screen-rules').classList.add('hidden');
            document.getElementById('screen-difficulty').classList.remove('hidden');
        }

        function confirmDifficulty() {
            document.getElementById('screen-rules').classList.add('hidden');
            document.getElementById('screen-category').classList.remove('hidden');
        }

        function startGame(category) {
            // Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø®Ù„ÙÙŠØ©
            document.body.style.backgroundImage = `linear-gradient(rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.8)), url('${bgImages[category] || bgImages.default}')`;

            // Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙƒÙ„Ù…Ø§Øª
            const list = data[category];
            const rand = Math.floor(Math.random() * list.length);
            currentWordObj = list[rand];

            // Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¬Ø§Ø³ÙˆØ³
            currentSpyIndex = Math.floor(Math.random() * players.length);
            
            // Ø¨Ø¯Ø¡ Ø§Ù„ØªÙˆØ²ÙŠØ¹
            currentPlayerIndex = 0;
            document.getElementById('screen-category').classList.add('hidden');
            updatePassScreen();
        }

        function updatePassScreen() {
            if (currentPlayerIndex >= players.length) {
                // Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ØªÙˆØ²ÙŠØ¹ØŒ Ø§Ù„Ø°Ù‡Ø§Ø¨ Ù„Ù„Ù†Ù‚Ø§Ø´
                document.getElementById('screen-pass').classList.add('hidden');
                document.getElementById('screen-reveal').classList.add('hidden');
                document.getElementById('screen-discussion').classList.remove('hidden');
                return;
            }

            document.getElementById('screen-reveal').classList.add('hidden');
            document.getElementById('screen-pass').classList.remove('hidden');
            document.getElementById('currentPlayerName').innerText = players[currentPlayerIndex].name;
        }

        function showRole() {
            const isSpy = (currentPlayerIndex === currentSpyIndex);
            const name = players[currentPlayerIndex].name;
            const revealName = document.getElementById('revealName');
            const theWord = document.getElementById('theWord');
            const hint = document.getElementById('spyHint');

            revealName.innerText = name;

            if (isSpy) {
                if (selectedDifficulty === 'easy') {
                    theWord.innerText = "ğŸ¤« Ø£Ù†Øª Ø§Ù„Ø¬Ø§Ø³ÙˆØ³!";
                    theWord.style.color = "#c0392b";
                    hint.innerText = "Ø­Ø§ÙˆÙ„ Ù…Ø¹Ø±ÙØ© Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹ Ù…Ù† ÙƒÙ„Ø§Ù… Ø§Ù„Ø¢Ø®Ø±ÙŠÙ† ÙˆØ§Ø®Ø¯Ø¹Ù‡Ù…!";
                } else {
                    // Hard mode: Spy gets the similar word
                    theWord.innerText = currentWordObj.spy;
                    theWord.style.color = "#d35400";
                    hint.innerText = "Ù‡Ø°Ù‡ Ù‡ÙŠ ÙƒÙ„Ù…ØªÙƒØŒ ØªØµØ±Ù Ø¨Ø·Ø¨ÙŠØ¹ÙŠØ©!";
                }
            } else {
                theWord.innerText = currentWordObj.common;
                theWord.style.color = "#27ae60";
                hint.innerText = "Ø£Ù†Øª Ù…ÙˆØ§Ø·Ù† ØµØ§Ù„Ø­ØŒ Ø§ÙƒØ´Ù Ø§Ù„Ø¯Ø®ÙŠÙ„!";
            }

            document.getElementById('screen-pass').classList.add('hidden');
            document.getElementById('screen-reveal').classList.remove('hidden');
        }

        function nextPlayer() {
            currentPlayerIndex++;
            updatePassScreen();
        }

        // --- Ù…Ù†Ø·Ù‚ Ø§Ù„ØªØµÙˆÙŠØª ---

        function startVotingSetup() {
            document.getElementById('screen-discussion').classList.add('hidden');
            currentVoterIndex = 0;
            votes = new Array(players.length).fill(-1); // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªØµÙˆÙŠØª
            updateVotePassScreen();
        }

        function updateVotePassScreen() {
            if (currentVoterIndex >= players.length) {
                calcResults();
                return;
            }
            document.getElementById('screen-vote-action').classList.add('hidden');
            document.getElementById('screen-vote-pass').classList.remove('hidden');
            document.getElementById('currentVoterName').innerText = players[currentVoterIndex].name;
        }

        function showVotingScreen() {
            document.getElementById('screen-vote-pass').classList.add('hidden');
            document.getElementById('screen-vote-action').classList.remove('hidden');
            
            const voterName = players[currentVoterIndex].name;
            document.getElementById('voterNameAction').innerText = voterName;

            const container = document.getElementById('votingButtonsContainer');
            container.innerHTML = ""; // Ù…Ø³Ø­ Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©

            // Ø¥Ù†Ø´Ø§Ø¡ Ø£Ø²Ø±Ø§Ø± Ù„ÙƒÙ„ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† (Ù…Ø§ Ø¹Ø¯Ø§ Ø§Ù„Ø´Ø®Øµ Ù†ÙØ³Ù‡)
            players.forEach((p, index) => {
                if (index !== currentVoterIndex) {
                    const btn = document.createElement('button');
                    btn.className = "vote-btn";
                    btn.innerText = `Ø£Ø´Ùƒ ÙÙŠ ${p.name}`;
                    btn.onclick = function() { submitVote(index); };
                    container.appendChild(btn);
                }
            });
        }

        function submitVote(targetIndex) {
            votes[currentVoterIndex] = targetIndex;
            currentVoterIndex++;
            updateVotePassScreen();
        }

        // --- Ø§Ù„Ø­Ø³Ø§Ø¨ ÙˆØ§Ù„Ù†ØªØ§Ø¦Ø¬ ---

        function calcResults() {
            document.getElementById('screen-vote-action').classList.add('hidden');
            document.getElementById('screen-results').classList.remove('hidden');

            // Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª
            document.getElementById('realSpyName').innerText = players[currentSpyIndex].name;
            document.getElementById('citizenWordDisplay').innerText = currentWordObj.common;
            
            if (selectedDifficulty === 'easy') {
                document.getElementById('spyWordResultDisplay').innerText = "(Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙƒÙ„Ù…Ø©)";
            } else {
                document.getElementById('spyWordResultDisplay').innerText = currentWordObj.spy;
            }

            // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù†Ù‚Ø§Ø·
            // 1. ÙƒÙ„ Ù…ÙˆØ§Ø·Ù† ØµÙˆØª Ù„Ù„Ø¬Ø§Ø³ÙˆØ³ ÙŠØ£Ø®Ø° Ù†Ù‚Ø·Ø©
            // 2. Ø§Ù„Ø¬Ø§Ø³ÙˆØ³ ÙŠØ£Ø®Ø° Ù†Ù‚Ø·Ø© Ø¹Ù† ÙƒÙ„ Ø´Ø®Øµ Ù„Ù… ÙŠØµÙˆØª Ø¹Ù„ÙŠÙ‡
            
            // Ù†Ø­ØªØ§Ø¬ Ù„Ø­ÙØ¸ Ù…Ù† ØµÙˆØª Ù„Ù…Ù† Ù„ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù†Ù‚Ø§Ø·
            for (let i = 0; i < players.length; i++) {
                if (i === currentSpyIndex) {
                    // Ù‡Ø°Ø§ Ù‡Ùˆ Ø§Ù„Ø¬Ø§Ø³ÙˆØ³ØŒ Ù†Ø­Ø³Ø¨ ÙƒÙ… Ø´Ø®Øµ Ù†Ø¬Ø§ Ù…Ù†Ù‡
                    // (Ø³ÙŠØªÙ… Ø­Ø³Ø§Ø¨ Ù†Ù‚Ø§Ø·Ù‡ Ø¨Ù†Ø§Ø¡ Ø¹Ù„Ù‰ ØªØµÙˆÙŠØªØ§Øª Ø§Ù„Ø¢Ø®Ø±ÙŠÙ†)
                } else {
                    // Ù‡Ø°Ø§ Ù…ÙˆØ§Ø·Ù†
                    if (votes[i] === currentSpyIndex) {
                        players[i].score += 10; // 10 Ù†Ù‚Ø§Ø· Ù„ÙƒØ´Ù Ø§Ù„Ø¬Ø§Ø³ÙˆØ³
                    }
                }
            }

            // Ø­Ø³Ø§Ø¨ Ù†Ù‚Ø§Ø· Ø§Ù„Ø¬Ø§Ø³ÙˆØ³
            let votesAgainstSpy = 0;
            votes.forEach((votedForIndex, voterIndex) => {
                if (votedForIndex === currentSpyIndex) {
                    votesAgainstSpy++;
                }
            });

            // Ø§Ù„Ø¬Ø§Ø³ÙˆØ³ ÙŠØ­ØµÙ„ Ø¹Ù„Ù‰ Ù†Ù‚Ø§Ø· Ù…Ù‚Ø§Ø¨Ù„ ÙƒÙ„ Ø´Ø®Øµ Ø®Ø¯Ø¹Ù‡
            // Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø´Ø®Ø§Øµ Ø§Ù„Ø°ÙŠÙ† Ø®Ø¯Ø¹Ù‡Ù… = (Ø¹Ø¯Ø¯ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† - 1 "Ø§Ù„Ø¬Ø§Ø³ÙˆØ³ Ù†ÙØ³Ù‡") - (Ø§Ù„Ø£ØµÙˆØ§Øª Ø¶Ø¯Ù‡)
            const peopleFooled = (players.length - 1) - votesAgainstSpy;
            players[currentSpyIndex].score += (peopleFooled * 5); // 5 Ù†Ù‚Ø§Ø· Ø¹Ù† ÙƒÙ„ Ø´Ø®Øµ Ø®Ø¯Ø¹Ù‡

            updateScoreTable();
        }

        function updateScoreTable() {
            const tbody = document.getElementById('scoreTableBody');
            tbody.innerHTML = "";
            
            // ØªØ±ØªÙŠØ¨ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† Ø­Ø³Ø¨ Ø§Ù„Ù†Ù‚Ø§Ø·
            const sortedPlayers = [...players].sort((a, b) => b.score - a.score);

            sortedPlayers.forEach(p => {
                const tr = document.createElement('tr');
                tr.innerHTML = `<td>${p.name}</td><td>${p.score}</td>`;
                tbody.appendChild(tr);
            });
        }

        function playAgain() {
            // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø¬ÙˆÙ„Ø© Ù…Ø¹ Ø§Ù„Ø§Ø­ØªÙØ§Ø¸ Ø¨Ø§Ù„Ù†Ù‚Ø§Ø· ÙˆØ§Ù„Ø£Ø³Ù…Ø§Ø¡
            document.getElementById('screen-results').classList.add('hidden');
            document.getElementById('screen-category').classList.remove('hidden');
            
            // Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø· Ø®Ù„ÙÙŠØ© Ø§Ù„Ø´Ø§Ø´Ø© Ù„Ø­ÙŠØ§Ø¯ÙŠØ©
            document.body.style.backgroundImage = `linear-gradient(rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.8)), url('${bgImages.default}')`;
        }

    </script>
</body>
</html>
