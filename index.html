<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„Ø¹Ø¨Ø© Ø§Ù„Ø¬Ø§Ø³ÙˆØ³ Ø§Ù„Ù…ØªØ®ÙÙŠ</title>
    <style>
        /* --- CSS: Ø§Ù„ØªØµÙ…ÙŠÙ… --- */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #2c3e50;
            color: white;
            text-align: center;
            padding: 20px;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
        }

        .container {
            background-color: #34495e;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
            width: 90%;
            max-width: 400px;
        }

        h1 { color: #f1c40f; margin-bottom: 20px; }
        
        textarea, select, button {
            width: 100%;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 8px;
            border: none;
            font-size: 16px;
            box-sizing: border-box;
        }

        textarea {
            height: 100px;
            background-color: #ecf0f1;
            color: #2c3e50;
        }

        button {
            background-color: #e74c3c;
            color: white;
            cursor: pointer;
            font-weight: bold;
            transition: 0.3s;
        }

        button:hover { background-color: #c0392b; }

        .hidden { display: none; }
        
        .card {
            background: #ecf0f1;
            color: #2c3e50;
            padding: 40px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .word-reveal {
            font-size: 24px;
            font-weight: bold;
            color: #d35400;
        }

        .info-text { font-size: 18px; margin-bottom: 15px; }
    </style>
</head>
<body>

    <div class="container">
        <div id="screen-setup">
            <h1>ğŸ•µï¸ Ù„Ø¹Ø¨Ø© Ø§Ù„Ø¬Ø§Ø³ÙˆØ³</h1>
            <p>Ø£Ø¯Ø®Ù„ Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† (ÙƒÙ„ Ø§Ø³Ù… ÙÙŠ Ø³Ø·Ø±):</p>
            <textarea id="playerNames" placeholder="Ø¹Ù„ÙŠ&#10;Ù…Ø­Ù…Ø¯&#10;Ø³Ø§Ø±Ø©&#10;Ø£Ø­Ù…Ø¯"></textarea>
            <button onclick="goToCategories()">Ø§Ù„ØªØ§Ù„ÙŠ: Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù†Ù…Ø·</button>
        </div>

        <div id="screen-category" class="hidden">
            <h1>Ø§Ø®ØªØ± Ø§Ù„Ù†Ù…Ø·</h1>
            <p>Ø³ÙŠØªÙ… ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø£Ø¯ÙˆØ§Ø± Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰:</p>
            <button onclick="startGame('football')">âš½ Ù„Ø§Ø¹Ø¨ÙŠ ÙƒØ±Ø© Ù‚Ø¯Ù…</button>
            <button onclick="startGame('animals')">ğŸ¦ Ø­ÙŠÙˆØ§Ù†Ø§Øª</button>
            <button onclick="startGame('food')">ğŸ• Ø£ÙƒÙ„</button>
            <button onclick="startGame('cities')">ğŸŒ Ù…Ø¯Ù†</button>
        </div>

        <div id="screen-pass" class="hidden">
            <h1>ğŸ›‘ Ù‚Ù!</h1>
            <p class="info-text">Ø£Ø¹Ø·Ù Ø§Ù„Ø¬ÙˆØ§Ù„ Ù„Ù€:</p>
            <h2 id="currentPlayerName" style="color: #f1c40f; font-size: 30px;">...</h2>
            <button onclick="showRole()">Ø§Ø¶ØºØ· Ù„Ù…Ø¹Ø±ÙØ© ÙƒÙ„Ù…ØªÙƒ</button>
        </div>

        <div id="screen-reveal" class="hidden">
            <p>ÙŠØ§ <span id="revealName"></span>ØŒ ÙƒÙ„Ù…ØªÙƒ Ù‡ÙŠ:</p>
            <div class="card">
                <span id="theWord" class="word-reveal">...</span>
            </div>
            <p style="font-size: 14px; color: #7f8c8d;">Ø§Ø­ÙØ¸ Ø§Ù„ÙƒÙ„Ù…Ø© ÙˆÙ„Ø§ ØªØ®Ø¨Ø± Ø£Ø­Ø¯Ø§Ù‹!</p>
            <button onclick="nextPlayer()">Ø­Ø³Ù†Ø§Ù‹ØŒ ÙÙ‡Ù…Øª</button>
        </div>

        <div id="screen-vote" class="hidden">
            <h1>ğŸ—³ï¸ ÙˆÙ‚Øª Ø§Ù„ØªØµÙˆÙŠØª!</h1>
            <p>Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ØªÙˆØ²ÙŠØ¹. Ù†Ø§Ù‚Ø´ÙˆØ§ Ø¨ÙŠÙ†ÙƒÙ… ÙˆØ§ÙƒØªØ´ÙÙˆØ§ Ù…Ù† Ø§Ù„Ø¯Ø®ÙŠÙ„.</p>
            <div class="card">
                <p>Ø§Ù„Ø­Ù‚ÙŠÙ‚Ø©:</p>
                <p>Ø§Ù„Ø¬Ø§Ø³ÙˆØ³ ÙƒØ§Ù†: <strong id="spyNameDisplay" style="color:red"></strong></p>
                <p>ÙƒÙ„Ù…Ø© Ø§Ù„Ù…ÙˆØ§Ø·Ù†ÙŠÙ†: <b id="commonWordDisplay"></b></p>
                <p>ÙƒÙ„Ù…Ø© Ø§Ù„Ø¬Ø§Ø³ÙˆØ³: <b id="spyWordDisplay"></b></p>
            </div>
            <button onclick="location.reload()">Ù„Ø¹Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø©</button>
        </div>
    </div>

    <script>
        /* --- JavaScript: Ø§Ù„Ù…Ù†Ø·Ù‚ --- */

        // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙƒÙ„Ù…Ø§Øª (ÙƒÙ„ Ø²ÙˆØ¬ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ ÙƒÙ„Ù…ØªÙŠÙ† Ù…ØªØ´Ø§Ø¨Ù‡ØªÙŠÙ†)
        const data = {
            football: [
                { common: "Ù…ÙŠØ³ÙŠ", spy: "Ø±ÙˆÙ†Ø§Ù„Ø¯Ùˆ" },
                { common: "Ø±ÙŠØ§Ù„ Ù…Ø¯Ø±ÙŠØ¯", spy: "Ø¨Ø±Ø´Ù„ÙˆÙ†Ø©" },
                { common: "Ø¶Ø±Ø¨Ø© Ø¬Ø²Ø§Ø¡", spy: "Ø±ÙƒÙ„Ø© Ø­Ø±Ø©" }
            ],
            animals: [
                { common: "Ø£Ø³Ø¯", spy: "Ù†Ù…Ø±" },
                { common: "Ù‚Ø·Ø©", spy: "ÙƒÙ„Ø¨" },
                { common: "ØµÙ‚Ø±", spy: "Ù†Ø³Ø±" }
            ],
            food: [
                { common: "Ø¨ÙŠØªØ²Ø§", spy: "Ø¨Ø±Ø¬Ø±" },
                { common: "Ø´Ø§ÙˆØ±Ù…Ø§", spy: "ÙÙ„Ø§ÙÙ„" },
                { common: "ØªÙØ§Ø­", spy: "Ø¨Ø±ØªÙ‚Ø§Ù„" }
            ],
            cities: [
                { common: "Ø¯Ø¨ÙŠ", spy: "Ø§Ù„Ø±ÙŠØ§Ø¶" },
                { common: "Ø¨Ø§Ø±ÙŠØ³", spy: "Ù„Ù†Ø¯Ù†" },
                { common: "Ø¨ØºØ¯Ø§Ø¯", spy: "Ø¯Ù…Ø´Ù‚" }
            ]
        };

        let players = [];
        let currentPlayerIndex = 0;
        let spyIndex = -1;
        let currentWordObj = {}; // Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø®ØªØ§Ø±Ø© Ù„Ù‡Ø°Ù‡ Ø§Ù„Ø¬ÙˆÙ„Ø©

        // Ø¯Ø§Ù„Ø© Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙØ¦Ø©
        function goToCategories() {
            const text = document.getElementById('playerNames').value;
            // ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù†Øµ Ø¥Ù„Ù‰ Ù…ØµÙÙˆÙØ© ÙˆØ­Ø°Ù Ø§Ù„Ø£Ø³Ø·Ø± Ø§Ù„ÙØ§Ø±ØºØ©
            players = text.split('\n').filter(name => name.trim() !== "");

            if (players.length < 3) {
                alert("ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ù‡Ù†Ø§Ùƒ 3 Ù„Ø§Ø¹Ø¨ÙŠÙ† Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„!");
                return;
            }

            document.getElementById('screen-setup').classList.add('hidden');
            document.getElementById('screen-category').classList.remove('hidden');
        }

        // Ø¯Ø§Ù„Ø© Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø© ÙˆØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø£Ø¯ÙˆØ§Ø±
        function startGame(category) {
            // 1. Ø§Ø®ØªÙŠØ§Ø± Ø²ÙˆØ¬ ÙƒÙ„Ù…Ø§Øª Ø¹Ø´ÙˆØ§Ø¦ÙŠ Ù…Ù† Ø§Ù„ÙØ¦Ø©
            const categoryList = data[category];
            const randomIndex = Math.floor(Math.random() * categoryList.length);
            currentWordObj = categoryList[randomIndex];

            // 2. Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¬Ø§Ø³ÙˆØ³ Ø¹Ø´ÙˆØ§Ø¦ÙŠØ§Ù‹
            spyIndex = Math.floor(Math.random() * players.length);
            currentPlayerIndex = 0;

            // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ø´Ø§Ø´Ø© Ø§Ù„ØªÙ…Ø±ÙŠØ±
            document.getElementById('screen-category').classList.add('hidden');
            updatePassScreen();
        }

        // ØªØ­Ø¯ÙŠØ« Ø´Ø§Ø´Ø© "Ø£Ø¹Ø· Ø§Ù„Ù‡Ø§ØªÙ Ù„Ù€..."
        function updatePassScreen() {
            if (currentPlayerIndex >= players.length) {
                // Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„Ø¬Ù…ÙŠØ¹ØŒ Ù†Ø°Ù‡Ø¨ Ù„Ù„ØªØµÙˆÙŠØª
                document.getElementById('screen-pass').classList.add('hidden');
                document.getElementById('screen-reveal').classList.add('hidden');
                
                document.getElementById('spyNameDisplay').innerText = players[spyIndex];
                document.getElementById('commonWordDisplay').innerText = currentWordObj.common;
                document.getElementById('spyWordDisplay').innerText = currentWordObj.spy;
                
                document.getElementById('screen-vote').classList.remove('hidden');
                return;
            }

            document.getElementById('screen-reveal').classList.add('hidden');
            document.getElementById('screen-pass').classList.remove('hidden');
            document.getElementById('currentPlayerName').innerText = players[currentPlayerIndex];
        }

        // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„ÙƒÙ„Ù…Ø© Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø­Ø§Ù„ÙŠ
        function showRole() {
            const isSpy = (currentPlayerIndex === spyIndex);
            const word = isSpy ? currentWordObj.spy : currentWordObj.common;
            const name = players[currentPlayerIndex];

            document.getElementById('revealName').innerText = name;
            document.getElementById('theWord').innerText = word;

            document.getElementById('screen-pass').classList.add('hidden');
            document.getElementById('screen-reveal').classList.remove('hidden');
        }

        // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„ØªØ§Ù„ÙŠ
        function nextPlayer() {
            currentPlayerIndex++;
            updatePassScreen();
        }
    </script>
</body>
</html>